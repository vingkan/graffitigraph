<!DOCTYPE html>
<html>
	<head>
		<title>Graffiti Graph</title>
		<link rel="stylesheet" type="text/css" href="style/reset.css">
		<link rel="stylesheet" type="text/css" href="style/main.css">
		<!--<link rel="icon" type="img/png" href="style/favicon.png" style="width:30px;">-->
		<!-- IMPORTED SCRIPTS -->
		<!-- NEED GOOGLE FONTS LATER -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- NEED FIREBASE LATER -->
		<!-- MOMENT.JS -->
		<script type="text/javascript" src="moment.min.js"></script>
		<!-- LEAFLET.JS -->
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
		<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
		<style>

			div#map{
				display: none;
			}

		</style>
	</head>

	<body>

		<div id="map"></div>

		<script src="webcam.js"></script>

		<div id="my_camera" style="width:320px; height:240px;"></div>
		<div id="my_result"></div>
	    <script language="JavaScript">
			Webcam.attach('#my_camera');
			function take_snapshot(){
				Webcam.snap(function(data_uri){
					document.getElementById('my_result').innerHTML = '<img src="' + data_uri + '"/>';
				});
			}
		</script>

		<a href="javascript:void(take_snapshot())">Take Snapshot</a>

		<script type="text/javascript" src="lib/storage.js"></script>
		<script type="text/javascript" src="lib/graffiti.js"></script>
		<script type="text/javascript" src="lib/requests.js"></script>
		<script type="text/javascript" src="lib/main.js"></script>
		<script type="text/javascript">

		function getGeoIP(callback){
			var x = new XMLHttpRequest();
			x.open('GET', 'https://geoip.nekudo.com/api/', false);
			x.send();
			var res = x.responseText;
			var geoip = JSON.parse(res);
			if(callback){
				callback(geoip);
			}
		}

		getGeoIP(main);

		</script>

		<script type="text/javascript" src="fb-sdk.js"></script>

		<script>
		  window.fbAsyncInit = function() {
		    FB.init({
		      appId      : '1681466342126424',
		      xfbml      : true,
		      version    : 'v2.6'
		    });
		  };

		  (function(d, s, id){
		     var js, fjs = d.getElementsByTagName(s)[0];
		     if (d.getElementById(id)) {return;}
		     js = d.createElement(s); js.id = id;
		     js.src = "//connect.facebook.net/en_US/sdk.js";
		     fjs.parentNode.insertBefore(js, fjs);
		   }(document, 'script', 'facebook-jssdk'));
		</script>

	</body>

</html>